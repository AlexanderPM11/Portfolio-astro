---
// src/components/SkillsData.ts
import {
  Database,
  Figma,
  Key,
  Code,
  Zap, // React
  Box, // Docker
  Layout, // WordPress
  Sliders, // Tailwind CSS
} from "lucide-astro";

interface Skill {
  name: string;
  Icon: any; // Icono compatible con Astro (lucide-astro)
  category: string;
}

export const skills: Skill[] = [
  // Languages
  { name: "JavaScript", Icon: Code, category: "Languages" },
  { name: "TypeScript", Icon: Code, category: "Languages" },
  { name: "C#", Icon: Code, category: "Languages" },
  { name: "SQL", Icon: Database, category: "Languages" },
  { name: "Dart", Icon: Code, category: "Languages" },

  // Frameworks/Libraries
  { name: "React", Icon: Zap, category: "Frameworks/Libraries" },
  { name: "Astro", Icon: Code, category: "Frameworks/Libraries" },
  { name: "Flutter", Icon: Code, category: "Frameworks/Libraries" },
  { name: "Tailwind CSS", Icon: Sliders, category: "Frameworks/Libraries" },
  { name: "HTML", Icon: Code, category: "Frameworks/Libraries" },
  { name: "CSS", Icon: Code, category: "Frameworks/Libraries" },
  { name: "ASP.NET Core", Icon: Code, category: "Frameworks/Libraries" },
  { name: "WordPress", Icon: Layout, category: "Frameworks/Libraries" },

  // Cloud/DevOps
  { name: "Docker", Icon: Box, category: "Cloud/DevOps" },
  { name: "Linux Server", Icon: Code, category: "Cloud/DevOps" },
  { name: "VPS Deployment", Icon: Code, category: "Cloud/DevOps" },
  { name: "Certificados SSL", Icon: Key, category: "Cloud/DevOps" },

  // ML/Data
  { name: "SQL Server", Icon: Database, category: "ML/Data" },
  { name: "MySQL", Icon: Database, category: "ML/Data" },

  // Concepts
  { name: "Git", Icon: Code, category: "Concepts" },
  { name: "GitHub", Icon: Code, category: "Concepts" },
  { name: "GitLab", Icon: Code, category: "Concepts" },
  { name: "Figma", Icon: Figma, category: "Concepts" },
  { name: "Trello", Icon: Code, category: "Concepts" },
  { name: "Jira", Icon: Code, category: "Concepts" },
  { name: "API Design", Icon: Code, category: "Concepts" },
];

let activeCategory = "Languages";
const skillFilters = [
  "Languages",
  "Frameworks/Libraries",
  "Cloud/DevOps",
  "Concepts",
];
---

<section
  id="skills"
  class="py-16 px-4 bg-[#0B0F1A] text-white relative z-10"
>
  <div class="max-w-6xl mx-auto text-center">
    <h2 class="text-3xl font-bold mb-2">
      Habilidades <span class="text-orange-500">Técnica</span>
    </h2>
    <p class="max-w-xl mx-auto text-gray-400 font-medium">
      Tecnologías y herramientas que domino.
    </p>

    <!-- Tabs -->
    <div
      id="skills-tabs"
      class="flex flex-wrap justify-center gap-2 mt-10 mb-8 bg-white/5 p-2 rounded-xl backdrop-blur-sm border border-white/10 w-fit mx-auto"
    >
      {
        skillFilters.map((filter) => (
          <button
            type="button"
            class={`cursor-pointer px-4 py-1.5 rounded-md text-sm font-semibold transition-colors ${filter === activeCategory ? "bg-white text-gray-900 shadow" : "text-white/70 hover:bg-white/10"}`}
            data-category={filter}
          >
            {filter}
          </button>
        ))
      }
    </div>

    <!-- Skill Cards -->
    <div id="skills-container" class="flex flex-wrap justify-center gap-4 mt-6">
      {
        skills.map(({ name, Icon, category }) => (
          <div
            class={`skill-card flex items-center gap-3 px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 transition text-white max-w-[200px] border border-white/10 backdrop-blur-sm ${category !== activeCategory ? "hidden" : ""}`}
            data-category={category}
          >
            <Icon class="text-2xl text-white/80" />
            <span class="text-sm font-semibold">{name}</span>
          </div>
        ))
      }
    </div>
  </div>
</section>
<script>
  const buttons = document.querySelectorAll<HTMLButtonElement>(
    "#skills-tabs button"
  );
  const cards = document.querySelectorAll<HTMLDivElement>(".skill-card");

  buttons.forEach((btn) => {
    btn.addEventListener("click", () => {
      const category = btn.dataset.category;
      if (!category) return;

      // Actualizar tab activo
      buttons.forEach((b) => {
        if (b.dataset.category === category) {
          b.classList.add("bg-white", "text-gray-900", "shadow");
          b.classList.remove("text-white/70", "hover:bg-white/10");
        } else {
          b.classList.remove("bg-white", "text-gray-900", "shadow");
          b.classList.add("text-white/70", "hover:bg-white/10");
        }
      });

      // Mostrar/Ocultar cards
      cards.forEach((card) => {
        if (card.dataset.category === category) {
          card.classList.remove("hidden");
        } else {
          card.classList.add("hidden");
        }
      });
    });
  });
</script>
