---
import heroImg from "../../assets/img/Hero.jpeg";
import meImg from "../../assets/img/profile.png";
import Button from "../common/Button.astro";
import SocialMedia from "../SocialMedia.astro";
import "astro-icon";

import { Folder, ArrowDown } from "lucide-astro";
---

<section
  id="hero"
  class="h-screen min-h-[600px] bg-center bg-cover bg-no-repeat flex items-center justify-center text-center text-white px-4 relative"
  style={`background-image: linear-gradient(rgb(11 25 38 / 0%), rgba(11,25,38,0.8)), url(${heroImg.src})`}
>
  <div class="absolute inset-0 bg-[#0b192680] z-0"></div>

  <div
    class="relative z-10 flex flex-col-reverse lg:flex-row items-center justify-between gap-10 lg:gap-20 py-10"
  >
    <!-- Texto -->
    <div class="text-center lg:text-left max-w-xl">
      <h1
        class="text-4xl sm:text-5xl lg:text-4xl font-bold uppercase leading-tight mb-2 text-white"
      >
        Alexander Polanco
      </h1>

      <h2 id="typewriter" class="text-lg sm:text-1xl font-bold mb-4 h-8"></h2>

      <p class="text-base sm:text-lg mb-6 text-white/90">
        Me enfoco en construir aplicaciones eficientes, escalables y seguras,
        combinando lo mejor del backend y frontend para ofrecer experiencias
        digitales s√≥lidas y funcionales.
      </p>

      <div
        class="flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-4"
      >
        <Button
          href="#projects"
          variant="primary"
          class="bg-white text-gray-900 hover:bg-white/75"
          icon={Folder}
          iconPosition="right"
          iconColor="text-gray-900"
          iconSize="w-4 h-4"
        >
          <span class="text-gray-900">Proyectos</span>
        </Button>

        <Button
          href="/CV_Alexander_Polanco_Desarrollo_de_Software.pdf"
          variant="primary"
          class="bg-transparent hover:bg-white/10 border border-gray-500 text-white"
          icon={ArrowDown}
          iconPosition="left"
          iconSize="w-5 h-5"
        >
          Descargar
        </Button>
      </div>

      <div class="flex justify-center md:justify-start mt-4">
        <SocialMedia />
      </div>
    </div>

    <!-- Imagen -->
    <div
      class="w-48 h-48 sm:w-64 sm:h-64 lg:w-80 lg:h-80 overflow-hidden rounded-full shadow-lg animate__animated animate__backInLeft"
    >
      <img
        src={meImg.src}
        alt="Alexander Polanco"
        class="w-full h-full object-cover"
      />
    </div>
  </div>
</section>

<!-- üß† Typewriter + Scroll suave -->
<script>
  const words = [
    "Full Stack Developer",
    "Frontend Developer",
    "Backend Specialist",
    "React Lover",
    "ASP.NET Expert",
    "Software Architect",
  ];
  const typewriterEl = document.getElementById("typewriter")!;
  let wordIndex = 0;
  let charIndex = 0;
  let isDeleting = false;

  function typeEffect() {
    const currentWord = words[wordIndex];
    const displayed = isDeleting
      ? currentWord.substring(0, charIndex--)
      : currentWord.substring(0, charIndex++);
    typewriterEl.textContent = displayed + "|";
    if (!isDeleting && charIndex === currentWord.length + 1) {
      setTimeout(() => (isDeleting = true), 2000);
    } else if (isDeleting && charIndex === 0) {
      isDeleting = false;
      wordIndex = (wordIndex + 1) % words.length;
    }
    const speed = isDeleting ? 40 : 80;
    setTimeout(typeEffect, speed);
  }

  typeEffect();

  // üß≠ Scroll suave
  document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
    const anchorEl = anchor as HTMLAnchorElement;
    anchorEl.addEventListener("click", function (e) {
      const targetId = anchorEl.getAttribute("href");
      if (!targetId?.startsWith("#")) return;

      const target = document.querySelector(targetId);
      if (!target) return;

      e.preventDefault();
      const offset = target.getBoundingClientRect().top + window.scrollY - 80;
      window.scrollTo({ top: offset, behavior: "smooth" });
    });
  });
</script>
