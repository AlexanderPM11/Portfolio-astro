---
import type { BlogPost } from "../services/wordpress";
import { FaCalendarAlt, FaUser } from "react-icons/fa";
import { defaultBlogImages } from "../util/constants/BlogImages";

const { post } = Astro.props as { post: BlogPost };
---

<article class="bg-gray-800 rounded-lg overflow-hidden shadow-lg transition-transform duration-300 hover:-translate-y-2">
  <img
    src={post._embedded?.["wp:featuredmedia"]
      ? post._embedded["wp:featuredmedia"][0].source_url
      : defaultBlogImages[post.id % defaultBlogImages.length]}
    alt={post.title.rendered}
    class="w-full h-48 object-cover"
  />
  <div class="p-6">
    <a href={`/blog/${post.id}`}>
      <h3
        class="text-xl font-bold mb-2 hover:text-orange-500 transition-colors cursor-pointer"
        set:html={post.title.rendered}
      />
    </a>
    <div class="flex items-center gap-4 text-sm text-gray-400 mb-4">
      <span class="flex items-center gap-1">
        <FaCalendarAlt />
        {new Date(post.date).toLocaleDateString()}
      </span>
      {post._embedded?.author && (
        <span class="flex items-center gap-1">
          <FaUser />
          {post._embedded.author[0].name}
        </span>
      )}
    </div>
    <div
      class="text-gray-300 mb-4 line-clamp-3"
      set:html={post.excerpt.rendered}
    />
    <a
      href={`/blog/${post.id}`}
      class="inline-block px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors"
    >
      Leer m√°s
    </a>
  </div>
</article>
